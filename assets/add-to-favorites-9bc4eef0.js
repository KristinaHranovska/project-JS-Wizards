import{a as j,f as I}from"./vendor-0a7c832e.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(t){if(t.ep)return;t.ep=!0;const r=n(t);fetch(t.href,r)}})();(()=>{const e={openModalBtn:document.querySelector(".burger-menu-open"),closeModalBtn:document.querySelector(".burger-closed"),modal:document.querySelector(".backdrop"),backdrop:document.querySelector(".background-menu")};e.modal.classList.add("is-hidden"),e.openModalBtn.addEventListener("click",function(){o(),n();const t=document.getElementsByClassName("js-main-link-home"),r=document.getElementsByClassName("js-main-link-favorites"),a=window.location.pathname,d="favorites.html";a.endsWith(d)?(console.log("FAVORITES"),Array.from(r).forEach(c=>c.classList.add("active-link")),Array.from(t).forEach(c=>c.classList.remove("active-link"))):(console.log("HOME"),Array.from(t).forEach(c=>c.classList.add("active-link")),Array.from(r).forEach(c=>c.classList.remove("active-link")))}),e.closeModalBtn.addEventListener("click",function(){o(),s()}),e.backdrop.addEventListener("click",function(t){t.target===e.backdrop&&(o(),s())});function o(){e.modal.classList.toggle("is-hidden"),e.backdrop.classList.toggle("hidden")}function n(){document.body.style.overflow="hidden"}function s(){document.body.style.overflow=""}})();const p=document.querySelector(".link-favorites"),v=document.querySelector(".link-home");window.addEventListener("load",()=>{window.location.pathname.endsWith("favorites.html")?(p.classList.add("active-link"),v.classList.remove("active-link")):(v.classList.add("active-link"),p.classList.remove("active-link"))});async function S({filter:e,limit:o,page:n=1,typeFilter:s,id:t=null}){try{const r=t?`https://energyflow.b.goit.study/api/${s}/${t}`:`https://energyflow.b.goit.study/api/${s}`;return await j.get(r,{params:{filter:e,page:n,limit:o,id:t}})}catch(r){console.error(r.message)}}function x(){const e=document.querySelector(".js-quote"),o=document.querySelector(".js-author"),s=I(new Date,"dd.MM.yyyy"),t=localStorage.getItem("dateNow");setTimeout(()=>{if(t===s){const r=JSON.parse(localStorage.getItem("quoteDay")),{author:a,quote:d}=r;e.textContent=d,o.textContent=a;return}},500),(!t||t!==s||!localStorage.getItem("quoteDay"))&&(localStorage.setItem("dateNow",s),S({typeFilter:"quote"}).then(({data:r})=>{const{author:a,quote:d}=r,c={author:a,quote:d};localStorage.setItem("quoteDay",JSON.stringify(c)),e.textContent=d,o.textContent=a}).catch(()=>{console.log(err)}))}x();const T="/project-JS-Wizards/assets/sprite-afa54ed9.svg",y=document.querySelector(".backdrop-thumb"),E=document.querySelector(".js-modal-window"),w=document.querySelector(".js-gallery");w.addEventListener("click",C);function C(e){if(e.target.classList.contains("js-start")){y.classList.remove("is-open"),document.body.style.overflow="hidden";const o=e.target.closest(".js-id");if(o){const n=o.dataset.id;F(n)}}}E.addEventListener("click",h);document.addEventListener("keydown",k);function h(e){y.classList.add("is-open"),document.body.style.overflow="",V()}function k(e){e.code==="Escape"&&(y.classList.add("is-open"),document.body.style.overflow="")}y.addEventListener("click",function(e){e.target===this&&h()});function F(e){S({typeFilter:"exercises",id:e}).then(({data:o})=>{const{name:n,rating:s,target:t,bodyPart:r,equipment:a,popularity:d,burnedCalories:c,description:q,gifUrl:L,_id:b}=o;document.querySelector(".modal-window").setAttribute("data-modal-id",b);const l={img:document.querySelector(".js-img"),title:document.querySelector(".js-title"),raiting:document.querySelector(".js-raiting"),targetValue:document.querySelector(".js-target"),bodyPartValue:document.querySelector(".js-body-part"),equipmentValue:document.querySelector(".js-equipment"),popularValue:document.querySelector(".js-popular"),caloriesValue:document.querySelector(".js-calories"),descriptionValue:document.querySelector(".js-description")},m=Math.round(s).toFixed(1);document.querySelectorAll(".raiting-item .icon-star").forEach((f,g)=>{g<Math.floor(m)||g===Math.floor(m)&&m%1!==0?f.classList.remove("non-activ"):f.classList.add("non-activ")}),l.img.setAttribute("src",L),l.title.textContent=n.charAt(0).toUpperCase()+n.slice(1),l.raiting.textContent=m,l.targetValue.textContent=t,l.bodyPartValue.textContent=r,l.equipmentValue.textContent=a,l.popularValue.textContent=d,l.caloriesValue.textContent=c,l.descriptionValue.textContent=q}).catch(o=>console.error(o))}function V(){const e={img:document.querySelector(".js-img"),title:document.querySelector(".js-title"),raiting:document.querySelector(".js-raiting"),targetValue:document.querySelector(".js-target"),bodyPartValue:document.querySelector(".js-body-part"),equipmentValue:document.querySelector(".js-equipment"),popularValue:document.querySelector(".js-popular"),caloriesValue:document.querySelector(".js-calories"),descriptionValue:document.querySelector(".js-description")};e.img.setAttribute("src",""),e.title.textContent="",e.raiting.textContent="",e.targetValue.textContent="",e.bodyPartValue.textContent="",e.equipmentValue.textContent="",e.popularValue.textContent="",e.caloriesValue.textContent="",e.descriptionValue.textContent="",document.querySelectorAll(".raiting-item .icon-star").forEach(n=>{n.classList.add("non-activ")})}const B=JSON.parse(localStorage.getItem("addKeyID"))||[];let u;const i={addToFavoritesBtn:document.querySelector(".add-to-favorities"),removeFromFavoritesBtn:document.querySelector(".js-remove"),idModul:document.querySelector(".js-gallery")};i.idModul.addEventListener("click",A);function A(e){const o=e.target.closest(".js-id");o&&(u=o.dataset.id,N().includes(u)?(i.removeFromFavoritesBtn.classList.remove("hidden-btn"),i.addToFavoritesBtn.classList.add("hidden-btn")):(i.removeFromFavoritesBtn.classList.add("hidden-btn"),i.addToFavoritesBtn.classList.remove("hidden-btn")))}if(!localStorage.getItem("addKeyID")){const e=[];localStorage.setItem("addKeyID",JSON.stringify(e))}i.addToFavoritesBtn.addEventListener("click",O);function O(){i.removeFromFavoritesBtn.classList.remove("hidden-btn"),i.addToFavoritesBtn.classList.add("hidden-btn");const e=JSON.parse(localStorage.getItem("addKeyID"));e.push(u),localStorage.setItem("addKeyID",JSON.stringify(e))}i.removeFromFavoritesBtn.addEventListener("click",M);function M(){i.removeFromFavoritesBtn.classList.add("hidden-btn"),i.addToFavoritesBtn.classList.remove("hidden-btn");const e=JSON.parse(localStorage.getItem("addKeyID"))||[],o=e.indexOf(u);o!==-1&&(e.splice(o,1),localStorage.setItem("addKeyID",JSON.stringify(e))),D()}function D(){const e=B.filter(n=>n!==u);localStorage.setItem("addKeyID",JSON.stringify(e));const o=document.querySelector(`.list-favorites-item[data-id="${u}"]`);o&&o.remove()}function N(){return localStorage.getItem("addKeyID")}export{S as g,T as i};
//# sourceMappingURL=add-to-favorites-9bc4eef0.js.map
