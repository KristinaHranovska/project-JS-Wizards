import{a as E,f as B,i as v}from"./vendor-0a7c832e.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function s(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=s(r);fetch(r.href,o)}})();(()=>{const e={openModalBtn:document.querySelector(".burger-menu-open"),closeModalBtn:document.querySelector(".burger-closed"),modal:document.querySelector(".backdrop"),backdrop:document.querySelector(".background-menu")};e.modal.classList.add("is-hidden"),e.openModalBtn.addEventListener("click",function(){t(),s();const r=document.getElementsByClassName("js-main-link-home"),o=document.getElementsByClassName("js-main-link-favorites"),a=window.location.pathname,d="favorites.html";a.endsWith(d)?(console.log("FAVORITES"),Array.from(o).forEach(i=>i.classList.add("active-link")),Array.from(r).forEach(i=>i.classList.remove("active-link"))):(console.log("HOME"),Array.from(r).forEach(i=>i.classList.add("active-link")),Array.from(o).forEach(i=>i.classList.remove("active-link")))}),e.closeModalBtn.addEventListener("click",function(){t(),n()}),e.backdrop.addEventListener("click",function(r){r.target===e.backdrop&&(t(),n())});function t(){e.modal.classList.toggle("is-hidden"),e.backdrop.classList.toggle("hidden")}function s(){document.body.style.overflow="hidden"}function n(){document.body.style.overflow=""}})();const S=document.querySelector(".link-favorites"),b=document.querySelector(".link-home");window.addEventListener("load",()=>{window.location.pathname.endsWith("favorites.html")?(S.classList.add("active-link"),b.classList.remove("active-link")):(b.classList.add("active-link"),S.classList.remove("active-link"))});async function h({filter:e,limit:t,page:s=1,typeFilter:n,id:r=null}){try{const o=r?`https://energyflow.b.goit.study/api/${n}/${r}`:`https://energyflow.b.goit.study/api/${n}`;return await E.get(o,{params:{filter:e,page:s,limit:t,id:r}})}catch(o){console.error(o.message)}}function F(){const e=document.querySelector(".js-quote"),t=document.querySelector(".js-author"),n=B(new Date,"dd.MM.yyyy"),r=localStorage.getItem("dateNow");setTimeout(()=>{if(r===n){const o=JSON.parse(localStorage.getItem("quoteDay")),{author:a,quote:d}=o;e.textContent=d,t.textContent=a;return}},500),(!r||r!==n||!localStorage.getItem("quoteDay"))&&(localStorage.setItem("dateNow",n),h({typeFilter:"quote"}).then(({data:o})=>{const{author:a,quote:d}=o,i={author:a,quote:d};localStorage.setItem("quoteDay",JSON.stringify(i)),e.textContent=d,t.textContent=a}).catch(()=>{console.log(err)}))}F();const V={getInfo(e){v.info({title:"Hello",message:e})},getErrorInfo(e){v.error({title:"Error",message:e})},getSuccessInfo(e){v.success({title:"OK",message:e})}},y="/project-JS-Wizards/assets/sprite-afa54ed9.svg",g={favoritesCard:document.getElementById("favorites-container"),removeCards:document.querySelector(".container-remove-favorites"),deleteButtons:document.querySelectorAll(".button-remove"),galleryWindow:document.querySelector(".js-gallery")};function A(){try{const e=JSON.parse(localStorage.getItem("addKeyID"))||[];O(e)}catch{window.location.pathname!=="/index.html"&&V.getErrorInfo("Wrong operation!!!")}}function O(e){!e||e.length===0?q():(L(e),T(),$()),w()}g.galleryWindow.addEventListener("click",M);function M(e){if(e.target.classList.contains("js-remove-favorites")){const t=e.target.closest(".list-favorites-item").dataset.id;N(t),e.target.closest(".list-favorites-item").remove(),(JSON.parse(localStorage.getItem("addKeyID"))||[]).length===0&&q()}}function N(e){let t=JSON.parse(localStorage.getItem("addKeyID"))||[];t=t.filter(s=>s!==e),localStorage.setItem("addKeyID",JSON.stringify(t))}function q(){g.removeCards.classList.remove("is-hidden")}function T(){g.removeCards.classList.add("is-hidden")}function $(){const e=document.querySelector(".scroll");e&&(e.getBoundingClientRect().height,window.scrollBy({top:0,behavior:"smooth"}))}function w(){const e=g.favoritesCard,t=e.querySelector(".list-favorites"),s=4;t&&(Math.ceil(t.children.length/3)>s?e.style.overflowY="scroll":e.style.overflowY="hidden")}A();function L(e){Promise.all(e.map(t=>h({typeFilter:"exercises",id:t}))).then(t=>{const s=t.map(o=>o.data),n=D(s),r=document.getElementById("favorites-container");r&&(r.insertAdjacentHTML("beforeend",n),w())}).catch(t=>console.error(t))}function D(e){return e.map(({name:t,target:s,bodyPart:n,burnedCalories:r,_id:o})=>`<li class="list-favorites-item js-id" data-id="${o}">
    <div class="container-card">
        <div class="container-worcaut">
            <div class="workout-thumb">
            <div class="workout">Workout</div>
            <button type="button" class="button-remove js-remove-favorites">
            <svg class="delete-favorites" data-id="${o}" width="16" height="16">
                <use href="${y}#icon-favorites-delete"></use>
            </svg>
            </button>
            </div>
            <button type="button" class="button-start js-start">
                Start
                <svg class="icon-arrow-body js-start" width="14" height="14">
                    <use href="${y}#icon-arrow-body-parts"></use>
                </svg>
            </button>
        </div>                  
                <div class="container-cards-favorites">
                    <svg class="icon-parts-fitness" width="24" height="24">
                        <use href="${y}#icon-body-parts-fitness"></use>
                    </svg>
                    <h3 class="subtitle-favorites">${t.charAt(0).toUpperCase()+t.slice(1)}</h3>
                </div>
                <div class="container-subtext-info">                           
                   <div class="favorites-card-text-wrapper"> 
                   <h4 class="subtext-info">Burned calories:</h4>  
                    <p class="mini-info">${r}/ 3 min</p>  
                    </div>
                    <div class="favorites-card-text-wrapper">
                    <h4 class="subtext-info">Body part:</h4> 
                    <p class="mini-info">${n}</p>  
                    </div>
                    <div class="favorites-card-text-wrapper">
                    <h4 class="subtext-info">Target: </h4>
                    <p class="mini-info">${s}</p>                           
                    </div>
               </div>
       </div>
</li>`).join("")}const u={backdrop:document.querySelector(".backdrop-thumb"),closeIcon:document.querySelector(".js-modal-window"),galleryWindow:document.querySelector(".js-gallery")},p=document.querySelectorAll(".raiting");u.galleryWindow.addEventListener("click",P);function P(e){if(e.target.classList.contains("js-start")){u.backdrop.classList.remove("is-open"),document.body.style.overflow="hidden";const t=e.target.closest(".js-id");if(t){const s=t.dataset.id;K(s)}}}u.closeIcon.addEventListener("click",C);document.addEventListener("keydown",W);function C(e){u.backdrop.classList.add("is-open"),document.body.style.overflow="",J()}function W(e){e.code==="Escape"&&(u.backdrop.classList.add("is-open"),document.body.style.overflow="")}u.backdrop.addEventListener("click",function(e){e.target===this&&C()});function K(e){h({typeFilter:"exercises",id:e}).then(({data:t})=>{const{name:s,rating:n,target:r,bodyPart:o,equipment:a,popularity:d,burnedCalories:i,description:I,gifUrl:k,_id:x}=t;document.querySelector(".modal-window").setAttribute("data-modal-id",x);const l={img:document.querySelector(".js-img"),title:document.querySelector(".js-title"),raiting:document.querySelector(".js-raiting"),targetValue:document.querySelector(".js-target"),bodyPartValue:document.querySelector(".js-body-part"),equipmentValue:document.querySelector(".js-equipment"),popularValue:document.querySelector(".js-popular"),caloriesValue:document.querySelector(".js-calories"),descriptionValue:document.querySelector(".js-description")};l.img.setAttribute("src",k),l.title.textContent=s.charAt(0).toUpperCase()+s.slice(1),l.raiting.textContent=n,l.targetValue.textContent=r,l.bodyPartValue.textContent=o,l.equipmentValue.textContent=a,l.popularValue.textContent=d,l.caloriesValue.textContent=i,l.descriptionValue.textContent=I,p.length>0&&R()}).catch(t=>console.error(t))}function J(){const e={img:document.querySelector(".js-img"),title:document.querySelector(".js-title"),raiting:document.querySelector(".js-raiting"),targetValue:document.querySelector(".js-target"),bodyPartValue:document.querySelector(".js-body-part"),equipmentValue:document.querySelector(".js-equipment"),popularValue:document.querySelector(".js-popular"),caloriesValue:document.querySelector(".js-calories"),descriptionValue:document.querySelector(".js-description")};e.img.setAttribute("src",""),e.title.textContent="",e.raiting.textContent="",e.targetValue.textContent="",e.bodyPartValue.textContent="",e.equipmentValue.textContent="",e.popularValue.textContent="",e.caloriesValue.textContent="",e.descriptionValue.textContent="",document.querySelectorAll(".raiting-item .icon-star").forEach(s=>{s.classList.add("non-activ")})}function R(){let e,t;for(let o=0;o<p.length;o++){const a=p[o];s(a)}function s(o){n(o),r()}function n(o){e=o.querySelector(".raiting-active"),t=o.getElementsByClassName("raiting-value")[0]}function r(o=t.innerHTML){const a=o/.05;e.style.width=`${a}%`}}const m=JSON.parse(localStorage.getItem("addKeyID"))||[];let f;const c={addToFavoritesBtn:document.querySelector(".add-to-favorities"),removeFromFavoritesBtn:document.querySelector(".js-remove"),idModul:document.querySelector(".js-gallery")};c.idModul.addEventListener("click",H);function H(e){const t=e.target.closest(".js-id");t&&(f=t.dataset.id,G().includes(f)?(c.removeFromFavoritesBtn.classList.remove("hidden-btn"),c.addToFavoritesBtn.classList.add("hidden-btn")):(c.removeFromFavoritesBtn.classList.add("hidden-btn"),c.addToFavoritesBtn.classList.remove("hidden-btn")))}if(!localStorage.getItem("addKeyID")){const e=[];localStorage.setItem("addKeyID",JSON.stringify(e))}c.addToFavoritesBtn.addEventListener("click",()=>z(f));function z(e){c.removeFromFavoritesBtn.classList.remove("hidden-btn"),c.addToFavoritesBtn.classList.add("hidden-btn"),j(e),m.push(e),localStorage.setItem("addKeyID",JSON.stringify(m))}c.removeFromFavoritesBtn.addEventListener("click",()=>U(f));function U(e){c.removeFromFavoritesBtn.classList.add("hidden-btn"),c.addToFavoritesBtn.classList.remove("hidden-btn"),j(e),m.splice(m.indexOf(e),1)}function j(e){const t=m.filter(n=>n!==e);localStorage.setItem("addKeyID",JSON.stringify(t));const s=document.querySelector(`.list-favorites-item[data-id="${e}"]`);s?s.remove():L([e])}function G(){return localStorage.getItem("addKeyID")}export{y as i};
//# sourceMappingURL=add-to-favorites-78f1cc05.js.map
