import{c as S,i as b}from"./assets/add-to-favorites-c3afa088.js";import{a as p,P as B,i as f}from"./assets/vendor-0a7c832e.js";const y={page:1,limit:1,filter:"Muscles"},w="rating";function h(e){window.innerWidth>=1440?y.limit=9:y.limit=8,o.innerHTML="",E(e,y.page).then(t=>{if(t.results.length===0)document.querySelector(".tui-pagination").style.display="none",o.innerHTML='<p class="ex-list-no-result">Unfortunately, <span class="accent-text">no results</span> were found. You may want to consider other search options to find the exercise you are looking for. Our range is wide and you have the opportunity to find more options that suit your needs.</p>';else{const s=S(t.results,w,b);o.innerHTML=s;const n=document.querySelectorAll(".js-animation-exercises");n.forEach(l=>{l.classList.add("animation-items")}),setTimeout(()=>{n.forEach(l=>{l.classList.remove("animation-items")})},500),t.totalPages>1?(document.querySelector(".tui-pagination").style.display="flex",I(t.totalPages).on("afterMove",({page:l})=>{E(e,l).then(g=>{o.innerHTML="";const H=S(g.results,w,b);o.innerHTML=H;const L=document.querySelectorAll(".js-animation-exercises");L.forEach(v=>{v.classList.add("animation-items")}),setTimeout(()=>{L.forEach(v=>{v.classList.remove("animation-items")})},500)})})):document.querySelector(".tui-pagination").style.display="none"}}).catch(t=>{handleError(t.message)})}async function E(e,t){return a.value.length>0?r.keyword=a.value.trim().toLowerCase():r.keyword="",(await p.get("/exercises",{params:{[e]:r.filterGroup,keyword:r.keyword,page:t,limit:y.limit}})).data}const r={page:1,keyword:"",filter:"",filterGroup:""},o=document.querySelector(".gallery"),a=document.querySelector(".search-input");o&&(o.addEventListener("click",F),o.classList.add("exercises-card"));const i={searchButton:document.querySelector(".search-btn"),clearSearchButton:document.querySelector(".search-clear-btn"),filterButtonsContainer:document.querySelector(".exercises-btns-div"),searchFormContainer:document.querySelector(".ex-search"),sectionHeaderElement:document.querySelector(".exercises-header")};function F(e){if(e.preventDefault(),e.target.closest("ul").dataset.exercises){i.searchButton.addEventListener("click",x),i.clearSearchButton.addEventListener("click",C),a.addEventListener("input",T),i.filterButtonsContainer.addEventListener("click",M),i.searchFormContainer.style.display="block";const t=document.querySelector(".exercises-button.active");r.filter=t.dataset.filter,r.filterGroup=e.target.closest("ul").dataset.exercises;const s=`Exercises / <span class="head-small">${r.filterGroup.charAt(0).toUpperCase()+r.filterGroup.slice(1)}</span>`;i.sectionHeaderElement.innerHTML=s,h(r.filter)}}function x(e){e.preventDefault(),a.value.length>0&&(r.page=1,r.keyword=a.value.trim().toLowerCase(),h(r.filter),a.value="",i.clearSearchButton.style.visibility="hidden")}function T(){a.value.length>0?i.clearSearchButton.style.visibility="visible":i.clearSearchButton.style.visibility="hidden"}function C(){a.value="",i.clearSearchButton.style.visibility="hidden",r.page=1,h(r.filter)}a.addEventListener("keypress",function(e){if(e.key==="Enter"){const t=a.value.trim().toLowerCase();r.keyword=t,i.clearSearchButton.style.visibility="hidden",r.page=1,h(r.filter),a.value=""}});function M(e){e.target.tagName==="BUTTON"&&(a.value="",i.searchFormContainer.style.display="none",o.innerHTML="",o.classList.remove("exercises-card"),i.searchButton.removeEventListener("click",x),i.clearSearchButton.removeEventListener("click",C),a.removeEventListener("input",T),i.filterButtonsContainer.removeEventListener("click",M),r.page=1,i.sectionHeaderElement.innerHTML="Exercises")}function I(e){window.innerWidth>=1440?r.limit=9:r.limit=8;const t=document.querySelector(".tui-pagination"),s={totalItems:r.limit*e,itemsPerPage:r.limit,visiblePages:3,centerAlign:!0};return new B(t,s)}function $(e){window.innerWidth>=768?r.limit=12:r.limit=8;const t=document.querySelector(".tui-pagination"),s={totalItems:r.limit*e,itemsPerPage:r.limit,visiblePages:3,centerAlign:!0};return new B(t,s)}const c={gallery:document.querySelector(".gallery"),buttons:document.querySelector(".exercises-btns-div"),musclesBtn:document.querySelector('[data-filter="muscles"]'),bodypartsBtn:document.querySelector('[data-filter="bodypart"]'),equipBtn:document.querySelector('[data-filter="equipment"]')};p.defaults.baseURL="https://energyflow.b.goit.study/api";function A(e="show"){const t=document.querySelector(".loader");e==="show"?t.style.display="inline-block":t.style.display="none"}const d={page:1,limit:1,filter:"Muscles"};async function k(e){return A(),(await p.get("/filters",{params:{filter:d.filter,limit:d.limit,page:e}})).data}function O(e){f.error({position:"topRight",message:e})}function q(e){c.gallery.innerHTML="";const t=e.map(({name:n,filter:l,imgUrl:g})=>`<li class="gallery-item js-animation">
        <a href="">
        <img class="gallery-image" src="${g}" alt="Galllery Image">
            <ul class="gallery-item-description" data-exercises="${n}">
                <li class="name">${n}</li>
                <li class="filter">${l}</li>
            </ul>
        </a>
    </li>`).join("");c.gallery.innerHTML=t;const s=document.querySelectorAll(".js-animation");s.forEach(n=>{n.classList.add("animation-items")}),setTimeout(()=>{s.forEach(n=>{n.classList.remove("animation-items")})},500)}async function P(){window.innerWidth>=768?d.limit=12:d.limit=8,k(d.page).then(e=>{const{results:t}=e;q(t),e.totalPages>1?(document.querySelector(".tui-pagination").style.display="flex",$(e.totalPages).on("afterMove",({page:s})=>{k(s).then(n=>{const{results:l}=n;c.gallery.innerHTML="",q(l)})})):document.querySelector(".tui-pagination").style.display="none"}).catch(e=>{O(e.message)})}P();c.musclesBtn.classList.add("active");c.buttons.addEventListener("click",e=>{G(e);const t=e.target;t!==e.currentTarget&&(t===c.musclesBtn?d.filter="Muscles":t===c.bodypartsBtn?d.filter="Body parts":t===c.equipBtn&&(d.filter="Equipment"),P())});let m=null;function G(e){const t=e.target.nodeName==="BUTTON";c.musclesBtn.classList.remove("active"),t&&(e.target.classList.add("active"),m!==null&&m.classList.remove("active"),m=e.target,m===m&&m.classList.add("active"))}const u={emailPattern:/^[\w-]+(\.[\w-]+)*@([\w-]+\.)+[a-zA-Z]{2,7}$/,footerForm:document.querySelector(".footer-subscription-form"),footerInput:document.querySelector(".footer-subscription-input"),feedbackForm:"feedback-subscribe-state"},j=async e=>{try{return(await p.post("https://energyflow.b.goit.study/api/subscription",{email:e})).data}catch(t){throw t}},D=async e=>{e.preventDefault();const t=u.footerInput.value.trim();if(!u.emailPattern.test(t))f.error({message:"Enter the correct email!"});else{try{await j(t),f.success({message:"Successful subscription!"})}catch{f.error({message:"The user with this address is already subscribed!"})}localStorage.removeItem(u.feedbackForm),u.footerForm.reset()}};u.footerForm.addEventListener("submit",D);u.footerForm.addEventListener("input",()=>{const e=u.footerInput.value.trim(),t=JSON.stringify({footerEmail:e});localStorage.setItem(u.feedbackForm,t)});
//# sourceMappingURL=commonHelpers2.js.map
