{"version":3,"file":"commonHelpers.js","sources":["../src/js/favorities.js"],"sourcesContent":["import { getAccess } from './helper/get-access.js';\nimport { iziToastFunctions } from './helper/helpers.js';\n\nconst refs = {\n    favoritesCard: document.getElementById('favorites-container'),\n    removeCards: document.querySelector(\".container-remove-favorites\"),\n    deleteButtons: document.querySelectorAll('.button-remove'),\n    galleryWindow: document.querySelector('.js-gallery'),\n}\n\nfunction savedCardsStorage() {\n    try {\n        const savedCards = JSON.parse(localStorage.getItem('addKeyID')) || [];\n        console.log(savedCards);\n\n        displayFavoriteCards(savedCards);\n    } catch (error) {\n        iziToastFunctions.getErrorInfo('Wrong operation!!!');\n    }\n}\n\nfunction displayFavoriteCards(savedCards) {\n    if (!savedCards || savedCards.length === 0) {\n        showRemoveCards();\n    } else {\n        createCardFavorites(savedCards)\n        hideRemoveCards();\n        smoothScrollToNextGroup();\n    }\n}\n\nrefs.galleryWindow.addEventListener('click', deleteFavorites);\n\nfunction deleteFavorites(e) {\n    if (e.target.classList.contains('js-remove-favorites')) {\n        const cardId = e.target.closest('.list-favorites-item').dataset.id;\n        removeFavoriteCard(cardId);\n        e.target.closest('.list-favorites-item').remove();\n\n        const savedCards = JSON.parse(localStorage.getItem('addKeyID')) || [];\n        if (savedCards.length === 0) {\n            showRemoveCards();\n        }\n    }\n}\n\nfunction removeFavoriteCard(id) {\n    let savedCards = JSON.parse(localStorage.getItem('addKeyID')) || [];\n    savedCards = savedCards.filter(card => card !== id);\n    localStorage.setItem('addKeyID', JSON.stringify(savedCards));\n}\n\nfunction showRemoveCards() {\n    refs.removeCards.classList.remove(\"is-hidden\");\n}\n\nfunction hideRemoveCards() {\n    refs.removeCards.classList.add(\"is-hidden\");\n\n}\n\nfunction smoothScrollToNextGroup() {\n    const favoritesItem = document.querySelector(\".scroll\");\n    if (favoritesItem) {\n        const galleryItemHeight = favoritesItem.getBoundingClientRect().height;\n        window.scrollBy({\n            top: galleryItemHeight * 1,\n            behavior: \"smooth\",\n        });\n    }\n}\n\nsavedCardsStorage();\n\nfunction createCardFavorites(arr) {\n    Promise.all(arr.map(value =>\n        getAccess({ typeFilter: 'exercises', id: value })\n    ))\n        .then(results => {\n            const dataList = results.map(result => result.data);\n\n            refs.favoritesCard.insertAdjacentHTML(\"beforeend\", createMarkup(dataList));\n        })\n        .catch(err => console.error(err));\n}\n\nfunction createMarkup(arr) {\n    return arr.map(({ name, target, bodyPart, burnedCalories, _id }) =>\n        `<li class=\"list-favorites-item js-id\" data-id=\"${_id}\">\n    <div class=\"container-card\">\n        <div class=\"container-worcaut\">\n            <div class=\"workout-thumb\">\n            <div class=\"workout\">Workout</div>\n            <button type=\"button\" class=\"button-remove js-remove-favorites\">\n            <svg class=\"delete-favorites\" data-id=\"${_id}\" width=\"16\" height=\"16\">\n                <use href=\"./img/icons/sprite.svg#icon-favorites-delete\"></use>\n            </svg>\n            </button>\n            </div>\n            <button type=\"button\" class=\"button-start\">\n                Start\n                <svg class=\"icon-arrow-body\" width=\"14\" height=\"14\">\n                    <use href=\"./img/icons/sprite.svg#icon-arrow-body-parts\"></use>\n                </svg>\n            </button>\n        </div>                  \n                <div class=\"container-cards-favorites\">\n                    <svg class=\"icon-parts-fitness\" width=\"24\" height=\"24\">\n                        <use href=\"./img/icons/sprite.svg#icon-body-parts-fitness\"></use>\n                    </svg>\n                    <h3 class=\"subtitle-favorites\">${name}</h3>\n                </div>\n                <div class=\"container-subtext-info\">                           \n                    <p class=\"subtext-info\">Burned calories: <span class=\"mini-info\">${burnedCalories}/ 3 min</span></p>                          \n                    <p class=\"subtext-info\">Body part: <span class=\"mini-info\">${bodyPart}</span></p>    \n                    <p class=\"subtext-info\">Target: <span class=\"mini-info\">${target}</span></p>                           \n               </div>\n       </div>\n</li>`)\n        .join('');\n}"],"names":["refs","savedCardsStorage","savedCards","displayFavoriteCards","iziToastFunctions","showRemoveCards","createCardFavorites","hideRemoveCards","smoothScrollToNextGroup","deleteFavorites","cardId","removeFavoriteCard","id","card","favoritesItem","galleryItemHeight","arr","value","getAccess","results","dataList","result","createMarkup","err","name","target","bodyPart","burnedCalories","_id"],"mappings":"iGAGA,MAAMA,EAAO,CACT,cAAe,SAAS,eAAe,qBAAqB,EAC5D,YAAa,SAAS,cAAc,6BAA6B,EACjE,cAAe,SAAS,iBAAiB,gBAAgB,EACzD,cAAe,SAAS,cAAc,aAAa,CACvD,EAEA,SAASC,GAAoB,CACzB,GAAI,CACA,MAAMC,EAAa,KAAK,MAAM,aAAa,QAAQ,UAAU,CAAC,GAAK,GACnE,QAAQ,IAAIA,CAAU,EAEtBC,EAAqBD,CAAU,CAClC,MAAe,CACZE,EAAkB,aAAa,oBAAoB,CACtD,CACL,CAEA,SAASD,EAAqBD,EAAY,CAClC,CAACA,GAAcA,EAAW,SAAW,EACrCG,KAEAC,EAAoBJ,CAAU,EAC9BK,IACAC,IAER,CAEAR,EAAK,cAAc,iBAAiB,QAASS,CAAe,EAE5D,SAASA,EAAgB,EAAG,CACxB,GAAI,EAAE,OAAO,UAAU,SAAS,qBAAqB,EAAG,CACpD,MAAMC,EAAS,EAAE,OAAO,QAAQ,sBAAsB,EAAE,QAAQ,GAChEC,EAAmBD,CAAM,EACzB,EAAE,OAAO,QAAQ,sBAAsB,EAAE,OAAM,GAE5B,KAAK,MAAM,aAAa,QAAQ,UAAU,CAAC,GAAK,IACpD,SAAW,GACtBL,GAEP,CACL,CAEA,SAASM,EAAmBC,EAAI,CAC5B,IAAIV,EAAa,KAAK,MAAM,aAAa,QAAQ,UAAU,CAAC,GAAK,GACjEA,EAAaA,EAAW,OAAOW,GAAQA,IAASD,CAAE,EAClD,aAAa,QAAQ,WAAY,KAAK,UAAUV,CAAU,CAAC,CAC/D,CAEA,SAASG,GAAkB,CACvBL,EAAK,YAAY,UAAU,OAAO,WAAW,CACjD,CAEA,SAASO,GAAkB,CACvBP,EAAK,YAAY,UAAU,IAAI,WAAW,CAE9C,CAEA,SAASQ,GAA0B,CAC/B,MAAMM,EAAgB,SAAS,cAAc,SAAS,EACtD,GAAIA,EAAe,CACf,MAAMC,EAAoBD,EAAc,sBAAqB,EAAG,OAChE,OAAO,SAAS,CACZ,IAAKC,EAAoB,EACzB,SAAU,QACtB,CAAS,CACJ,CACL,CAEAd,IAEA,SAASK,EAAoBU,EAAK,CAC9B,QAAQ,IAAIA,EAAI,IAAIC,GAChBC,EAAU,CAAE,WAAY,YAAa,GAAID,CAAK,CAAE,CACxD,CAAK,EACI,KAAKE,GAAW,CACb,MAAMC,EAAWD,EAAQ,IAAIE,GAAUA,EAAO,IAAI,EAElDrB,EAAK,cAAc,mBAAmB,YAAasB,EAAaF,CAAQ,CAAC,CACrF,CAAS,EACA,MAAMG,GAAO,QAAQ,MAAMA,CAAG,CAAC,CACxC,CAEA,SAASD,EAAaN,EAAK,CACvB,OAAOA,EAAI,IAAI,CAAC,CAAE,KAAAQ,EAAM,OAAAC,EAAQ,SAAAC,EAAU,eAAAC,EAAgB,IAAAC,CAAK,IAC3D,kDAAkDA,CAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qDAMRA,CAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qDAgBHJ,CAAI;AAAA;AAAA;AAAA,uFAG8BG,CAAc;AAAA,iFACpBD,CAAQ;AAAA,8EACXD,CAAM;AAAA;AAAA;AAAA,MAG9E,EACG,KAAK,EAAE,CAChB"}